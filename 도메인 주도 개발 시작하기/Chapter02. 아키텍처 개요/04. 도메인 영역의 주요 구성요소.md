## 정리

> 도메인 영역은 엔티티, 밸류, 애그리거트, 리포지터리, 도메인 서비스로 이루어져있다.

도메인 영역의 주요 구성요소는 다음과 같다.

| 요소                          | 설명                                                         |
| ----------------------------- | ------------------------------------------------------------ |
| 엔티티(Entity)                | 고유의 식별자를 갖는 객체이다. 도메인의 고유한 개념을 표현하며 도메인 모델의 데이터를 포함해 관련된 기능을 함께 제공한다. |
| 밸류(Value)                   | 고유의 식별자를 갖지 않는 객체로 주로 개념적으로 하나인 도메인 객체의 속성을 표현할 때 사용된다. 엔티티의 속성으로 사용할 뿐만 아니라 다른 밸류 타입의 속성으로도 사용된다. |
| 애그리거트(Aggregate)         | 애그리거트는 관련된 엔티티와 밸류 객체를 개념적으로 하나로 묶은 것이다. |
| 리포지터리(Repository)        | 도메인 모델의 영속성을 처리한다.                             |
| 도메인 서비스(Domain Service) | 특정 엔티티에 속하지 않은 도메인 로직을 제공한다. 도메인 로직이 여러 엔티티와 밸류를 필요로 할 때 구현한다. |



### 엔티티와 밸류

> DB 테이블의 엔티티와 도메인 모델 엔티티는 다르다.
>
> 도메인 모델의 엔티티는 **데이터와 함께 도메인 기능**을 제공한다.
>
> 단순히 데이터를 담고 있는 데이터 구조가 아닌 데이터와 함께 기능을 제공하는 객체이다.

> RDBMS에서는 밸류 타입을 표현하기 어렵다.

### 애그리거트

> 도메인 모델이 복잡해지면 전체 구조가 아닌 한 개의 엔티티와 밸류에만 집중하는 상황이 발생한다.
>
> 개별 객체뿐만 아니라 상위 수준에서 모델을 봐야한다.
>
> 애그리거트는 도메인 모델에서 **전체 구조를 이해**하는 데 도움이 된다.

![복잡해지는 도메인 모델의 구성요소](https://user-images.githubusercontent.com/42582516/150241235-9d5534a2-79f4-440e-89f4-11ead1b2e810.png)

> 관련된 객체(도메인 모델)를 하나로 묶은 군집이다.
>
> 여러 하위 모델을 하나로 묶어 상위 개념으로 표현할 수 있다.

![애그리거트](https://user-images.githubusercontent.com/42582516/150241472-c18dbb6b-d154-4f86-ab08-5415cfacf547.png)

애그리거트는 군집에 속한 객체를 관리하는 루트 엔티티를 갖는다.

애그리거트를 사용하는 코드는 애그리거트 루트를 통해 애그리거트 내의 다른 객체에 간접적으로 접근한다.

이를 통해 애그리거트 단위로 캡슐화할 수 있다.

### 리포지터리

> 도메인 객체를 지속적으로 사용하기 위해 물리적인 저장소에 보관할 때 사용하는 도메인 모델이다.
>
> 엔티티나 밸류는 요구사항에서 도출되고, 리포지터리는 구현을 위한 도메인 모델이다.

> 리포지터리는 애그리거트 단위로 도메인 객체를 저장하고 조회한다.
>
> 도메인 모델 관점에서 리포지터리는 도메인 객체를 영속화하는 데 필요한 기능을 추상화해 고수준 모듈에 속한다.

리포지터리를 구현한 클래스는 저수준 모듈로 인프라스트럭처 영역에 속하기 때문에 다음과 같은 구조가 된다.

![img](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F90268ba6-e9e1-45d8-b7bd-a7ac64d6e319%2FUntitled.png?table=block&id=e7b31685-e96e-4d98-ad21-3faf6946bc9b&spaceId=1e3fa046-7541-465b-9874-10b8b0a80b1a&width=840&userId=958d9016-4ee5-4069-8558-49ca1065eb05&cache=v2)



## 느낀점

도메인 영역의 주요 구성요소에 대해 자세히 알아볼 수 있었다.

전체적인 구성요소에 대해 알게되어서 도메인 영역에 대한 이해가 올라간 것 같다.

또한 도메인 모델과 애그리거트의 차이에 대해서 이해가 되었다.

