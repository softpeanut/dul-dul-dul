# 정리

>응용 서비스는 표현 영역에 의존하지 않아야 하고 크기가 작아야 한다.



응용 서비스는 디자인 패턴 중 퍼사드 패턴과 같은 역할을 한다.

응용 서비스를 구현할 때 몇 가지 고려할 사항이 있다.



## 응용 서비스의 크기

보통 응용 서비스는 두 가지 방법 중 한 가지 방법으로 구현한다.

- 한 응용 서비스 클래스에 한 도메인의 모든 기능 구현하기
- 구분되는 기능별로 응용 서비스 클래스를 따로 구현하기



하나의 클래스에 한 도메인과 관련된 모든 기능을 구현하면 코드 중복을 제거할 수 있다.

하지만 관련된 모든 기능이 하나의 클래스에 위치하면 연관성이 적은 코드가 모여 가독성이 떨어지게 된다.

하나의 클래스에 모이기 시작하면 분리가 필요한 상황조차 억지로 끼워 넣게 된다.

이렇게 되면 코드 품질이 떨어지기 때문에 클래스 개수는 많아지더라도 각 기능별로 클래스를 분리해야 한다.

또한 각 기능마다 동일한 로직을 구현할 경우 헬퍼(Helper) 클래스를 만들어 코드 중복을 방지할 수 있다.



## 응용 서비스의 인터페이스와 클래스

응용 서비스를 구현할 때 인터페이스가 필요한 지에 대해 끊임없이 논쟁이 일어난다.

인터페이스가 필요한 상황은 구현 클래스가 여러 개인 경우이다.

하지만 응용 서비스의 구현 클래스가 여러 개인 경우는 매우 드물고 런타임에 구현 객체를 교체할 일도 거의 없다.

따라서 꼭 필요한 상황이 아니라면 인터페이스를 만드는 것은 좋지 않은 선택이다.



### 테스트 주도 개발

> Test Driven Development(TDD)

테스트 주도 개발을 할 때는 주로 표현 영역부터 개발을 시작하게 된다.

이런 경우 미리 응용 서비스를 구현할 수 없으므로 응용 서비스의 인터페이스를 만들어야 한다.



반대로 표현 영역이 아닌 도메인 영역이나 응용 영역의 개발을 먼저 시작하면 응용 서비스 클래스가 먼저 만들어진다.

이런 경우 테스트 주도 개발을 하더라도 Mockito와 같은 테스트 도구를 이용해 인터페이스 없이 표현 영역을 테스트할 수 있다.



## 메서드 파라미터와 값 리턴

응용 서비스가 제공하는 메서드는 요구 사항을 구현하는 데 필요한 값을 파라미터로 전달받아야 한다.

각 값을 개별 파라미터로 전달받을 수도 있고 별도 데이터 클래스를 만들어 전달받을 수도 있다.

응용 서비스에서 애그리거트 자체를 반환하면 편하게 구현할 수 있지만 응용 서비스와 표현 영역에 도메인 로직 실행을 분산시켜 응집도를 낮추게 된다.

표현 영역에서 필요한 데이터만 반환해 응집도를 높이는 것이 좋다.



## 표현 영역에 의존하지 않기

응용 서비스의 파라미터 타입을 결정할 때 표현 영역과 관련된 타입을 사용하면 안된다.

표현 영역에 대한 의존이 발생하면 응용 서비스와 표현 영역의 결합도가 높아지게 된다.

따라서 서비스 메서드의 파라미터와 리턴 타입으로 표현 영역의 구현 기술을 사용하지 않아야 한다.



## 트랜잭션 처리

스프링 프레임워크의 @Transactional을 이용해 쉽게 트랜잭션 처리를 할 수 있다.



# 느낀점

평소 응용 서비스를 구현할 때 불필요한 인터페이스 사용은 지양하는 편이다.

테스트 주도 개발을 하더라도 도메인 영역과 응용 영역 먼저 구현하였기 때문에 인터페이스를 굳이 만들 이유가 없었다.

응용 서비스가 표현 영역에 의존하지 않는 것은 당연한 내용인 것 같다.