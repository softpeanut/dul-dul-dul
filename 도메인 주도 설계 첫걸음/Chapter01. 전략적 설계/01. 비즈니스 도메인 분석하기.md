# 정리

> 비즈니스 도메인과 하위 도메인에 대한 정확한 이해가 필요하다.



도메인 주도 설계에 관심을 가지는 이유는 가지고 있는 기술을 더 잘 활용해 복잡한 문제를 해결하고 우아한 솔루션을 만들고 신중하게 규칙과 구조, 행동을 만들어서 완전히 새로운 세상을 건설하고 싶기 때문이다.

개발자도 기업이 존재하는 이유와 추구하는 목표가 무엇이며, 그 목표를 달성하기 위한 전략을 알아야 한다.

효과적인 솔루션을 설계하고 구축하기 위해서는 우리가 구축해야 하는 **소프트웨어 시스템**을 이해해야 한다.

소프트웨어 시스템을 이해하기 위해서 그것이 존재하는 맥락을 이해해야 하므로 그 조직의 **비즈니스 전략**과 소프트웨어를 만들면서 **얻고자 하는 가치**를 이해해야 한다.



## 비즈니스 도메인이란?

> 비즈니스 도메인은 기업의 **주요 활동 영역**을 정의한다.



일반적으로 다음과 같이 회사가 고객에게 제공하는 서비스를 말한다.

- 페덱스는 배송 서비스를 제공한다.
- 스타벅스는 커피로 가장 잘 알려져 있다.
- 월마트는 가장 널리 알려진 소매업체 중 하나다.

기업은 여러 비즈니스 도메인을 운영할 수 있다.

또한 비즈니스 도메인을 자주 변경할 수 있다.



## 하위 도메인이란?

> 하위 도메인은 비즈니스 활동의 세분화된 영역이다.



비즈니스 도메인의 목표를 달성하기 위해 기업은 여러 가지 하위 도메인을 운영해야 한다.

하위 도메인은 고객에게 제공하는 서비스 단위로 비즈니스 도메인을 만든다.

각각의 하위 도메인은 회사의 비즈니스 도메인에서 목표를 달성하기 위해 서로 **상호작용**해야 한다.



### 하위 도메인의 유형

하위 도메인은 서로 다른 전략적 비즈니스 가치를 가진다.

도메인 주도 설계에서 하위 도메인은 다음과 같이 세 가지 유형으로 구분한다.

- 핵심 하위 도메인
- 일반 하위 도메인
- 지원 하위 도메인

#### 핵심 하위 도메인

핵심 하위 도메인(core subdomain)은 **경쟁업체와 다르게 수행**하고 있는 것을 말한다.

핵심 하위 도메인은 수익에 영향을 미친다.

경쟁력을 유지하기 위한 핵심 하위 도메인에는 발명이나 스마트 최적화, 비즈니스 노하우, 또는 다른 지적 재산이 포함된다.

**복잡성**

구현하기 쉬운 핵심 하위 도메인은 일시적인 경쟁 우위만을 제공할 수 있다.

핵심 비즈니스는 경쟁사가 회사의 솔루션을 모방하거나 복제하기 어렵게 높은 진입장벽이 필요하다.

**경쟁 우위의 원천**

핵심 하위 도메인에 반드시 기술이 들어가야 하는 것은 아니다.

경쟁 우위는 다양한 원천에서 나오며 모든 비즈니스 문제가 알고리즘이나 기술 솔루션으로 해결되지 않는다.

**핵심 하위 도메인과 핵심 도메인의 관계**

핵심 하위 도메인은 핵심 도메인이라고도 부른다.

필자는 핵심 도메인이 실제로는 하위 도메인이며 비즈니스 도메인과의 혼동을 피할 수 있고, 하위 도메인이 시간이 지나면서 진화하고 유형이 변경되는 경우가 흔하기 때문에 더 직관적인 표현하는 '핵심 하위 도메인'을 더 선호한다.



#### 일반 하위 도메인

일반 하위 도메인(generic subdomain)은 **모든 회사가 같은 방식으로 수행**하는 비즈니스 활동을 말한다.

핵심 도메인과 마찬가지로 일반적으로 복잡하고 구현하기 어렵지만 회사에 경쟁력을 제공하지 않는다.

이미 실무에서 검증된 솔루션으로 널리 이용 가능하며, 모든 회사에서 사용하고 있어 더 이상 혁신이나 최적화가 필요 없다.



#### 지원 하위 도메인

지원 하위 도메인(supporting subdomain)은 **회사의 비즈니스를 지원하는 활동**을 말한다.

핵심 하위 도메인과 달리 어떠한 경쟁 우위도 제공하지 않으므로 높은 진입장벽이 필요하지 않다.

지원 하위 도메인의 차별되는 특징은 비즈니스 로직이 간단하다는 것이다.

대부분 데이터 입력 화면과 ETL(Extract, Transform, Load) 작업과 유사한 비즈니스 로직으로 이루어져 있으며 이는 CRUD 인터페이스를 말한다.



### 하위 도메인 비교

#### 경쟁 우위

``핵심 하위 도메인``만이 회사의 경쟁 우위를 제공하고 차별화하기 위한 회사의 전략이다.

정의에 따르면 ``일반 하위 도메인``은 경쟁 우위의 원천이 될 수 없다.

``지원 하위 도메인``은 업계 경쟁력에 영향을 주지 않아 경쟁사가 복제해도 크게 신경 쓰지 않는다.

회사는 전략적으로 지원 하위 도메인으로 이미 만들어져 있는 일반적인 솔루션을 사용하는 것을 선호한다.

해결할 수 있는 **문제가 더 복잡할수록 더 많은 비즈니스 가치**를 제공할 수 있다.

이 복잡한 문제는 소비자에게 서비스를 제공하는 것에 국한되지 않는다.



#### 복잡성

소프트웨어를 설계할 때 비즈니스 요구사항의 복잡성을 수용할 수 있는 도구와 기술을 선택해야 하기 때문에 하위 도메인을 식별하는 것은 중요하다.

``지원 하위 도메인``의 비즈니스 로직은 간단하고 기본적인 ETL 작업과 CRUD 인터페이스이며 명확하다.

입력의 유효성을 검증하거나 다른 구조의 데이터로 변환하는 것 이상의 로직에서 벗어나지 않는다.

#### 변동성

``핵심 하위 도메인``은 한 번의 시도로 문제가 해결되기 힘들기 때문에 자주 변경될 수 있다.

핵심 하위 도메인을 찾기 위해 다양한 방법으로 시도해보고 개선하고 최적화해야 한다.

경쟁 우위를 점하기 위해 **지속적인 진화는 필수적**이다.

``지원 하위 도메인``은 기업에 어떠한 경쟁 우위도 제공하지 않기 때문에 자주 변경되지 않는다.

``일반 하위 도메인``은 보안 패치, 버그 수정 또는 일반적인 문제에 대해 완전히 새로운 솔루션으로 변경되는 등 시간이 지남에 따라 변경될 수 있다.



#### 솔루션 전략

하위 도메인은 기본적인 구성요소이므로 하나를 제거하면 전체 구조가 무너질 수 있다.

즉, 하위 도메인 각각의 **고유한 속성을 활용해** 가장 효율적인 전략을 선택할 수 있다.

``핵심 하위 도메인``은 사내에서 구현되어야 한다.

핵심 하위 도메인 구현은 전략적인 투자이기 때문에 하청하는 것은 현명하지 않다.

핵심 하위 도메인의 요구사항은 지속적으로 자주 변경되기 때문에 솔루션은 유지보수가 가능하고 쉽게 개선될 수 있어야 한다.

``일반 하위 도메인``은 어렵지만 이미 문제가 해결되었기 때문에 이미 만들어진 제품을 구입하거나 오픈소스 솔루션을 채택하는 것이 비용 면에서 효율적이다.

``지원 하위 도메인``은 직접 구현하지 않는 것이 합리적이지만 기존에 만들어진 솔루션이 없는 경우가 있다.

지원 하위 도메인 구현은 비즈니스 로직이 단순하고 변경의 빈도가 적기 때문에 정교한 디자인 패턴이나 고급 엔지니어링 기술이 필요 없다.

신속한 애플리케이션 개발(RAD, Rapid Application Development) 프레임워크를 사용해 우발적 복잡성 없이 비즈니스 로직을 구현하기에 충분하다.

![image](https://user-images.githubusercontent.com/80632060/182822299-ea59fcd4-cb09-4f0a-980a-cf13b97c4185.png)



### 하위 도메인 경계 식별

하위 도메인과 그 유형은 기업의 **비즈니스 전략에 따라 정의**되며, 이는 동일한 분야에서 다른 회사와 경쟁하기 위해 차별화하는 방법이다.

회사의 부서와 기타 조직 단위는 좋은 출발점이다.

#### 하위 도메인 정제

크게 나눈 하위 도메인은 좋은 출발점이지만 비즈니스 기능의 복잡한 내용에 **숨겨진 중요한 정보**를 놓치지 않아야 한다.

예를 들어, 일반 하위 도메인의 내부 업무를 세분화하여 세분화된 핵심 하위 도메인, 지원 하위 도메인, 두 개의 일반 하위 도메인으로 나뉠 수 있다.

![image](https://user-images.githubusercontent.com/80632060/182826338-0988757d-228d-4aaf-b3b2-37346a73df85.png)



#### 응집된 유스케이스를 하위 도메인으로

기술적인 관점에서 하위 도메인은 상호 연관되고 응집된 유스케이스의 집합과 유사하다.

유스케이스 집합엣는 보통 동일한 행위자(acter), 비즈니스 엔티티(business entity)를 포함하고 밀접하게 관련된 데이터의 집합을 다룬다.

다음 유스케이스 다이어그램은 작업 중인 데이터 및 관련된 행위자와 밀접하게 연관되어 있다.

따라서 모든 유스케이스는 신용카드 결제 하위 도메인을 형성한다.

![image](https://user-images.githubusercontent.com/80632060/182836751-9d1ab827-8628-4e6b-bfe1-a7b992007c41.png)

세분화된 하위 도메인을 찾는 것을 중단하는 시점을 결정하기 위한 지침으로 '응집된 유스케이스의 집합인 하위 도메인'이라는 정의를 사용할 수 있다.

핵심 하위 도메인은 가장 중요하고, 변동성이 있고, 복잡하기 때문에 가능한 한 많이 정제하는 것이 중요하다.

지원 및 일반 하위 도메인은 세분화된 하위 도메인이 세부화 전의 하위 도메인과 동일한 유형인 것처럼 새로운 통찰이 나오지 않을 때 중단하면 된다.

혹은 하위 도메인이 모두 필요한지 여부에 따라 하위 도메인을 식별할 수 있다.



#### 핵심에 집중

하위 도메인은 소프트웨어 설계 의사결정으르 내리는 프로세스의 어려움을 쉽게 해결하도록 돕는 도구다.

하위 도메인을 찾을 때 소프트웨어와 관련되지 않은 비즈니스 기능을 식별하고, 작업 중인 소프트웨어 시스템과 관련된 비즈니스에 집중하는 것이 중요하다.



## 도메인 분석 예제

### Gigmaster

**핵심 하위 도메인**

- 추천 엔진
- 데이터 익명화
- 모바일 앱

**일반 하위 도메인**

- 암호화 - 모든 데이터 암호화
- 회계 - 회사가 영업을 하고 있기 때문
- 정산 - 고객에게 청구
- 인증 및 권한 부여 - 사용자 식별

**지원 하위 도메인**

- 음악 스트리밍 서비스와 연동
- 소셜 네트워크와 연동
- 참석 공연 모듈



### BusVNext

**핵심 하위 도메인**

- 라우팅
- 분석
- 모바일 앱 사용자 경험
- 차량 관리

**일반 하위 도메인**

- 교통 상황
- 회계
- 청구
- 권한 부여

**지원 하위 도메인**

- 프로모션과 할인 관리



## 도메인 전문가는 어떤 사람인가?

도메인 전문가(Domain Expert)는 우리가 모델링하고 코드로 구현할 비즈니스의 모든 복잡성을 알고 있는 권위자다.

도메인 전문가는 비즈니스를 대표하며 요구사항을 제시하는 사람 또는 소프트웨어의 최종 사용자다.

도메인 전문가의 전문성 범위는 다양하다.



## 결론

비즈니스가 운영되는 영역과 고객에게 제공하는 서비스는 모두 비즈니스 도메인과 함께 시작한다.

**핵심 하위 도메인** - 흥미로운 문제들, 기업이 경쟁자로부터 차별화하고 경쟁 우위를 얻는 활동

**일반 하위 도메인** - 해결된 문제들, 모든 회사가 같은 방식으로 하고 있는 일

**지원 하위 도메인** - 분명한 해결책이 있는 문제들, 경쟁 우위를 제공하지 않지만 사내에서 구현해야 하는 활동

도메인 전문가는 비즈니스의 주제 전문가이다.



# 느낀점

소프트웨어 시스템을 이해하기 위해서 조직의 비즈니스 전략과 소프트웨어를 통해 얻고자 하는 가치에 대해 알고 있어야 한다.

비즈니스 도메인과 각 하위 도메인의 특징을 자세하게 알게되었고, 경계를 나누는 방법에 대해서 알게되었다.

비즈니스 영역에 대해 정확하게 아는 것이 더 좋은 솔루션을 만들 수 있도록 한다.